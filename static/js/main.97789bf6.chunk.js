(this.webpackJsonpusers=this.webpackJsonpusers||[]).push([[0],{15:function(e,t,n){e.exports=n.p+"static/media/load-indicator.753bcc9a.gif"},32:function(e,t,n){e.exports=n.p+"static/media/load-indicator-md.3d74d24c.gif"},33:function(e,t,n){e.exports=n.p+"static/media/user.16fce02f.png"},36:function(e,t,n){e.exports=n(69)},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(6),c=n.n(s),o=n(7),l=n(10),i=n(11),u=n(13),E=n(12),m=n(30),d=n.n(m).a.create({baseURL:" http://77.120.241.80:8911/api"}),f=function(){return function(e){e({type:"FETCH_USERS_REQUEST"}),d.get("/users").then((function(t){return e({type:"FETCH_USERS_SUCCESS",result:t.data||[]})})).catch((function(){return e({type:"FETCH_USERS_FAILURE"})}))}},p=function(e){return function(t){t({type:"CREATE_USER_REQUEST"}),function(e){return d.post("/users",e)}(e).then((function(e){return t(function(e){return{type:"CREATE_USER_SUCCESS",user:e}}(e.data||[]))})).catch((function(e){return 422===e.response.status&&t(function(e){return{type:"CREATE_USER_FAILURE",error:e}}(e.response.data.errors))}))}},g=function(e){return function(t){t({type:"UPDATE_USER_REQUEST"}),function(e){return d.put("/user/".concat(e.id),e)}(e).then((function(e){return t(function(e){return{type:"UPDATE_USER_SUCCESS",user:e}}(e.data||[]))})).catch((function(e){var n;n=422!==e.response.status||e.response.data.errors,t(function(e){return{type:"UPDATE_USER_FAILURE",error:e}}(n))}))}},S=function(e){return function(t){var n;t({type:"DELETE_USER_REQUEST"}),(n=e,d.delete("/user/".concat(n))).then((function(){return t(function(e){return{type:"DELETE_USER_SUCCESS",userId:e}}(e))})).catch((function(){return t({type:"DELETE_USER_FAILURE",error:{error:!0}})}))}},h=function(e,t){return{type:"CLOSE_MODAL",name:e,user:t}},U=function(e){var t=e.onModalOpen;return r.a.createElement("header",{className:"border-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row row-cols-2 align-items-center py-3"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",null,"Users")),r.a.createElement("div",{className:"col text-right"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t("create",null)}},"Create User")))))},v=n(31),b=n.n(v),C=function(e){var t=e.message;return r.a.createElement("div",{className:"text-danger"}," ",t," ")};C.defaultProps={message:"An error occurred, please reload the page"};var _=C,O=n(32),R=n.n(O),N={create:!1,delete:!1},y={loading:!1,error:!1},T={users:[],usersSettings:y,currentUser:null,modal:N,modalSettings:y},j={name:"",surname:"",desc:""},D={the_name_field_is_required:"The name field is required",the_surname_field_is_required:"The surname field is required",the_desc_field_is_required:"The desc field is required"},A=5,L=3,k=n(33),M=n.n(k),P=(n(65),function(e){Object(u.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getUserChunk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t-1;return e.slice(n*A,t*A)},a.handlePageChange=function(e){a.setState({activePage:e,users:a.getUserChunk(a.state.allUsers,e)})},a.state={activePage:1,allUsers:e.users||[],users:(e.users||[]).slice(0,5)},a}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.users.length!==e.users.length&&this.setState({allUsers:this.props.users,users:this.getUserChunk(this.props.users)}),console.log("didUpdate")}},{key:"render",value:function(){var e=this.state,t=e.activePage,n=e.users,a=e.allUsers,s=this.props,c=s.onModalOpen,o=s.settings,l=o.loading,i=o.error;return r.a.createElement("div",{className:"container pt-5"},r.a.createElement("div",{className:"row row-cols-1"},r.a.createElement("div",{className:"col"},!l&&i&&r.a.createElement(_,null),!l&&!n.length&&"No users, create a new one",n.map((function(e){return r.a.createElement("div",{key:e.id,className:"card user-card"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"d-flex justify-content-center col-3"},r.a.createElement("img",{src:M.a,className:"card-img",alt:"user avatar"})),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h5",{className:"card-title"},e.name," ",e.surname),r.a.createElement("p",{className:"card-text"},e.desc),r.a.createElement("button",{className:"btn btn btn-outline-danger",onClick:function(){return c("delete",e)}},r.a.createElement("i",{className:"far fa-trash-alt"})),r.a.createElement("button",{className:"btn btn-outline-warning ml-2",onClick:function(){return c("create",e)}},r.a.createElement("i",{className:"fas fa-pencil-alt"}))))))})),a.length>A&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(b.a,{itemClass:"page-item",linkClass:"page-link",activePage:t,itemsCountPerPage:A,totalItemsCount:a.length,pageRangeDisplayed:L,onChange:this.handlePageChange})))),l&&r.a.createElement("div",{className:"d-inline-block load-indicator"},r.a.createElement("img",{className:"load-img",src:R.a}),r.a.createElement("div",{className:"load-bg"})))}}]),n}(a.PureComponent)),x=n(15),w=n.n(x),F=function(e){var t=e.user,n=e.onModalClose,a=e.onUserDelete,s=e.settings,c=s.loading,o=s.error;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(t.id)},className:"p-2"},r.a.createElement("h5",null,"Are you sure want to delete"," ",r.a.createElement("strong",null,t.name," ",t.surname)," ","form the list?"),r.a.createElement("div",{className:"btn-wrapper position-relative"},r.a.createElement("button",{className:"btn btn btn-outline-secondary",type:"button",onClick:function(){return n()}},"Cancel"),r.a.createElement("button",{className:"btn btn-outline-danger ml-2",type:"submit",disabled:c},"Confirm")," ",c&&r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("img",{src:w.a}))),o&&r.a.createElement(_,null))},I=n(14),q=n.n(I),Q=(n(66),n(1)),H=n.n(Q),B=n(71),J=(n(67),function(e){var t=e.animationType,n=e.children,a=e.show,s=e.timeout,c=e.onEnter,o=e.onEntering,l=e.onEntered,i=e.onExit,u=e.onExiting,E=e.onExited;return r.a.createElement(B.a,{in:a,timeout:s,classNames:t,unmountOnExit:!0,onEnter:c,onEntering:o,onEntered:l,onExit:i,onExiting:u,onExited:E},n)});J.T={animationType:H.a.string,children:H.a.node.required,onEnter:H.a.func,onEntering:H.a.func,onEntered:H.a.func,onExit:H.a.func,onExiting:H.a.func,onExited:H.a.func,show:H.a.bool.required,timeout:H.a.number},J.defaultProps={show:!1,timeout:300,animationType:"fadeIn"};var z=J,G=function(e){var t=e.isOpen,n=e.onClose,a=e.loading,c=e.children,o=e.className,l=function(){return a?null:n(!1)};return Object(s.createPortal)(r.a.createElement(z,{show:t},r.a.createElement("div",{className:q()("modal",{"d-block":t},o)},r.a.createElement("div",{className:"modal-backdrop",onClick:l}),r.a.createElement("div",{className:"modal-content bg-light"},r.a.createElement("button",{type:"button",className:"close close-modal",onClick:l},r.a.createElement("span",null,"\xd7")),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 layout-offset"},c)))))),document.getElementById("modal-root"))},K=Object(o.b)((function(e){var t=e.currentUser,n=e.modal;return{user:t,settings:e.modalSettings,isModalOpen:n.delete}}),(function(e){return{onUserDelete:function(t){return e(S(t))},onModalClose:function(){return e(h("delete"))}}}))((function(e){var t=e.user,n=e.settings,a=e.isModalOpen,s=e.onUserDelete,c=e.onModalClose;return r.a.createElement(G,{onClose:c,isOpen:a,loading:n.loading},t&&r.a.createElement(F,{user:t,settings:n,onUserDelete:s,onModalClose:c}))})),V=n(8),W=n(2),X=function(e){Object(u.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name,s=a.state,c=s.errors,o=s.user;a.setState({user:Object(W.a)(Object(W.a)({},o),{},Object(V.a)({},r,n)),errors:c?Object(W.a)(Object(W.a)({},c),{},Object(V.a)({},r,"")):null})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.isEdit,r=t.onUserEdit,s=t.onUserCreate,c=a.state.user;n?r(Object(W.a)(Object(W.a)({},c),{},{id:a.props.user.id})):s(c)},a.state={user:e.user||j,errors:e.settings.errors||!1},a}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.settings.error;t&&t!==e.settings.error&&this.setState({errors:t})}},{key:"render",value:function(){var e=this.props,t=e.isEdit,n=e.settings.loading,a=this.state,s=a.user,c=s.name,o=s.surname,l=s.desc,i=a.errors,u="boolean"===typeof i;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"name",id:"name",value:c,onChange:this.handleInputChange}),!u&&(null===i||void 0===i?void 0:i.name)&&r.a.createElement(_,{message:D[i.name[0]]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"surname"},"Surname"),r.a.createElement("input",{type:"text",name:"surname",className:"form-control",id:"surname",value:o,onChange:this.handleInputChange}),!u&&(null===i||void 0===i?void 0:i.surname)&&r.a.createElement(_,{message:D[i.surname[0]]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Description"),r.a.createElement("textarea",{className:"form-control",name:"desc",id:"description",value:l,onChange:this.handleInputChange}),!u&&(null===i||void 0===i?void 0:i.desc)&&r.a.createElement(_,{message:D[i.desc[0]]})),u&&i&&r.a.createElement(_,null),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:n},t?"Edit":"Create")," ",n&&r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("img",{src:w.a})))}}]),n}(a.PureComponent),Y=Object(o.b)((function(e){var t=e.currentUser,n=e.modal;return{user:t,settings:e.modalSettings,isModalOpen:n.create}}),(function(e){return{onUserCreate:function(t){return e(p(t))},onUserEdit:function(t){return e(g(t))},onModalClose:function(){return e(h("create"))}}}))((function(e){var t=e.user,n=e.settings,a=e.isModalOpen,s=e.onModalClose,c=e.onUserCreate,o=e.onUserEdit,l=t&&!!Object.keys(t).length;return r.a.createElement(G,{onClose:s,isOpen:a,loading:n.loading},r.a.createElement(X,{user:t,isEdit:l,settings:n,onUserEdit:o,onUserCreate:c}))})),Z=function(e){Object(u.a)(n,e);var t=Object(E.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchUsers()}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.usersSettings,a=e.onModalOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{onModalOpen:a}),r.a.createElement(P,{users:t,settings:n,onModalOpen:a}),r.a.createElement(Y,null),r.a.createElement(K,null))}}]),n}(a.PureComponent),$=Object(o.b)((function(e){return{users:e.users,usersSettings:e.usersSettings}}),(function(e){return{onFetchUsers:function(){return e(f())},onModalOpen:function(t,n){return e(function(e,t){return{type:"OPEN_MODAL",name:e,user:t}}(t,n))}}}))(Z),ee=n(9),te=n(16),ne=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));return[].concat(Object(te.a)(e.slice(0,n)),[t],Object(te.a)(e.slice(n+1)))},ae=Object(ee.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS_SUCCESS":return t.result;case"CREATE_USER_SUCCESS":return[t.user].concat(Object(te.a)(e));case"UPDATE_USER_SUCCESS":return ne(e,t.user);case"DELETE_USER_SUCCESS":return e.filter((function(e){return e.id!==t.userId}));default:return e}},usersSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS_REQUEST":return{loading:!0,error:!1};case"FETCH_USERS_FAILURE":return{loading:!1,error:!0};case"FETCH_USERS_SUCCESS":return{loading:!1,error:!1};default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return t.user;case"CLOSE_MODAL":return{};default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return Object(W.a)(Object(W.a)({},e),{},Object(V.a)({},t.name,!0));case"CLOSE_MODAL":return Object(W.a)(Object(W.a)({},e),{},Object(V.a)({},t.name,!1));case"DELETE_USER_SUCCESS":return Object(W.a)(Object(W.a)({},e),{},{delete:!1});case"CREATE_USER_SUCCESS":case"UPDATE_USER_SUCCESS":return Object(W.a)(Object(W.a)({},e),{},{create:!1});default:return e}},modalSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER_REQUEST":case"UPDATE_USER_REQUEST":case"DELETE_USER_REQUEST":return{loading:!0,error:!1};case"CLOSE_MODAL":case"CREATE_USER_SUCCESS":case"UPDATE_USER_SUCCESS":case"DELETE_USER_SUCCESS":return{loading:!1,error:!1};case"CREATE_USER_FAILURE":case"UPDATE_USER_FAILURE":case"DELETE_USER_FAILURE":return{loading:!1,error:t.error};default:return e}}}),re=[n(34).a],se=Object(ee.d)(ae,T,ee.a.apply(void 0,re));n(68);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:se},r.a.createElement($,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.97789bf6.chunk.js.map